# Clash é…ç½®æ–‡ä»¶ç¤ºä¾‹
# æ­¤æ–‡ä»¶å±•ç¤ºäº†å¦‚ä½•é…ç½®è®¢é˜…å’Œå¸¸ç”¨ä»£ç†è§„åˆ™

port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
mixed-port: 7890

# HTTP(S) and SOCKS5 server on the same port
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: false

# RESTful web API listening address
external-controller: 127.0.0.1:9090
secret: ""

# TUNé…ç½®
tun:
  enable: true
  stack: system
  device: clash-tun
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - 8.8.8.8:53
    - 8.8.4.4:53

# DNSé…ç½®ï¼ˆé’ˆå¯¹å›½å†…ç½‘ç»œç¯å¢ƒä¼˜åŒ–ï¼‰
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  default-nameserver:
    - 223.5.5.5        # é˜¿é‡ŒDNS
    - 223.6.6.6        # é˜¿é‡ŒDNSå¤‡ç”¨
    - 114.114.114.114  # 114DNS
    - 119.29.29.29     # è…¾è®¯DNS
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - localhost.ptlogin2.qq.com
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.apple.com"
    - "+.icloud.com"
  nameserver:
    - https://dns.alidns.com/dns-query    # é˜¿é‡ŒDoH
    - https://doh.pub/dns-query           # è…¾è®¯DoH
    - https://doh.360.cn/dns-query        # 360DoH
    - tls://dns.rubyfish.cn:853           # çº¢é±¼DoT
  fallback:
    - https://1.1.1.1/dns-query          # CloudFlare
    - https://8.8.8.8/dns-query          # Google DNS
    - tls://8.8.4.4:853                  # Google DoT
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ä»£ç†æä¾›è€…é…ç½®ç¤ºä¾‹
proxy-providers:
  # ä¸»è¦è®¢é˜…æº
  main-subscription:
    type: http
    url: "https://example.com/your-subscription-link"  # æ›¿æ¢ä¸ºæ‚¨çš„è®¢é˜…é“¾æ¥
    interval: 86400
    path: ./proxies/main.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

  # å¤‡ç”¨è®¢é˜…æº
  backup-subscription:
    type: http
    url: "https://backup.example.com/your-backup-subscription"  # å¯é€‰çš„å¤‡ç”¨è®¢é˜…
    interval: 86400
    path: ./proxies/backup.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# ä»£ç†ç»„é…ç½®
proxy-groups:
  # ä¸»è¦ä»£ç†é€‰æ‹©ç»„
  - name: "ğŸš€ ä»£ç†é€‰æ‹©"
    type: select
    use:
      - main-subscription
      - backup-subscription
    proxies:
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ¯ å…¨çƒç›´è¿"

  # è‡ªåŠ¨é€‰æ‹©æœ€å¿«èŠ‚ç‚¹
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    use:
      - main-subscription
      - backup-subscription
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50

  # æ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
  - name: "ğŸ”° èŠ‚ç‚¹é€‰æ‹©"
    type: select
    use:
      - main-subscription
      - backup-subscription

  # å›½å¤–åª’ä½“
  - name: "ğŸŒ å›½å¤–åª’ä½“"
    type: select
    proxies:
      - "ğŸš€ ä»£ç†é€‰æ‹©"
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ”° èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ¯ å…¨çƒç›´è¿"

  # å›½å†…ç›´è¿
  - name: "ğŸ¯ å…¨çƒç›´è¿"
    type: select
    proxies:
      - DIRECT

  # å¹¿å‘Šæ‹¦æˆª
  - name: "ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª"
    type: select
    proxies:
      - REJECT
      - DIRECT

# è§„åˆ™é…ç½®
rules:
  # å±€åŸŸç½‘ç›´è¿
  - DOMAIN-SUFFIX,local,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,127.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,172.16.0.0/12,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,192.168.0.0/16,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,10.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,17.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,100.64.0.0/10,ğŸ¯ å…¨çƒç›´è¿

  # å¸¸è§å¹¿å‘ŠåŸŸåæ‹¦æˆª
  - DOMAIN-SUFFIX,doubleclick.net,ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googleadservices.com,ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googlesyndication.com,ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googletagmanager.com,ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª

  # å›½å¤–å¸¸è§æœåŠ¡
  - DOMAIN-SUFFIX,google.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,googleapis.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,github.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,githubusercontent.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,youtube.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,youtu.be,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,netflix.com,ğŸŒ å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,twitter.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,facebook.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,instagram.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,telegram.org,ğŸš€ ä»£ç†é€‰æ‹©

  # å›½å†…æœåŠ¡ç›´è¿
  - DOMAIN-SUFFIX,cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,com.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,net.cn,ğŸ¯ å…¨çƒç›´è¿
  
  # ä¸»è¦å›½å†…ç½‘ç«™
  - DOMAIN-SUFFIX,qq.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,tencent.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,taobao.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,tmall.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,jd.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,360buy.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,weibo.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,sina.com.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,sina.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,bilibili.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,zhihu.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,baidu.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,163.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,126.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,netease.com,ğŸ¯ å…¨çƒç›´è¿
  
  # é˜¿é‡Œç³»
  - DOMAIN-SUFFIX,alipay.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,aliyun.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,alibaba.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,alicdn.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,alimama.com,ğŸ¯ å…¨çƒç›´è¿
  
  # å…¶ä»–å¸¸ç”¨å›½å†…æœåŠ¡
  - DOMAIN-SUFFIX,douyin.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,toutiao.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,xiaomi.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,huawei.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,oppo.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,vivo.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,meizu.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,lenovo.com.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,iqiyi.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,youku.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,tudou.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,mgtv.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,sohu.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,ifeng.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,autohome.com.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,58.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,anjuke.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,lianjia.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,dianping.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,meituan.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,ele.me,ğŸ¯ å…¨çƒç›´è¿
  
  # é“¶è¡Œå’Œé‡‘è
  - DOMAIN-SUFFIX,icbc.com.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,ccb.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,boc.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,abchina.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,95599.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,cmbchina.com,ğŸ¯ å…¨çƒç›´è¿
  
  # æ”¿åºœå’Œå®˜æ–¹ç½‘ç«™
  - DOMAIN-SUFFIX,gov.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,edu.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,mil.cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,ac.cn,ğŸ¯ å…¨çƒç›´è¿

  # ä¸­å›½IPç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿

  # æœ€ç»ˆè§„åˆ™
  - MATCH,ğŸš€ ä»£ç†é€‰æ‹©
